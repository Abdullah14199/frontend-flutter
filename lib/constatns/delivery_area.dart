import 'package:flutter/material.dart';
import 'package:google_maps_flutter/google_maps_flutter.dart';
import 'dart:math' show Point;

import 'package:google_maps_utils/utils/poly_utils.dart';

const  initialPoint = LatLng(55.16268414442231, 61.299276608455976);
// Radius within which to return place results
const radiusToPlaceResultsMeters = 25000;

class MapPolygon {
  int? id;

  // на самом деле это время выполнения заказа
  // а не время доставки
  int? deliveryTime;
  int? freeDeliveryFrom;
  int? warehouseId;
  String? description;
  int? polyColor;
  List<LatLng> points = [];
}

class PolygonForHitTest {
  MapPolygon? mapPolygon;
  List<Point>? points;
}

class MapHolder {
  static MapHolder? _instance;

  static MapHolder get instance => _instance ??= MapHolder._();

  Set<Polygon>? mapPolygons;
  List<PolygonForHitTest>? _polygonsForHitTest;

  MapHolder._() {
    var deliveryPolygons = _getDeliveryPolygons();
    _polygonsForHitTest = _createPolygonsForHitTest(deliveryPolygons);
    mapPolygons = _createGoogleMapPolygons(deliveryPolygons);
  }

  List<PolygonForHitTest> _createPolygonsForHitTest(List<MapPolygon> polygons) {
    var res = <PolygonForHitTest>[];
    for (var poly in polygons) {
      var p = PolygonForHitTest();
      p.mapPolygon = poly;
      List<Point> points = [];
      for (LatLng p in poly.points) {
        points.add(Point(p.latitude, p.longitude));
      }
      p.points = points;
      res.add(p);
    }
    return res;
  }

  // DP возвращает полигон, в который попал пользователь
  // если пользователь не попал в полигон, то возвращает null
  MapPolygon? checkIfPointInDeliveryArea(LatLng point) {
    if (point != null) {
      Point pt = Point(point.latitude, point.longitude);
      for (var poly in _polygonsForHitTest!) {
        if (PolyUtils.containsLocationPoly(pt, poly.points!)) {
          return poly.mapPolygon!;
        }
      }
      return null;
    } else {
      return null;
    }
  }

  Set<Polygon> _createGoogleMapPolygons(List<MapPolygon> polygons) {
    var res = Set<Polygon>();
    for (var poly in polygons) {
      List<LatLng> points = poly.points;
      var polyId = 'poly_id_${poly.id}';
      res.add(Polygon(
        polygonId: PolygonId(polyId),
        consumeTapEvents: false,
        strokeColor: Color(poly.polyColor!),
        strokeWidth: 4,
        fillColor: Color(poly.polyColor!).withOpacity(0.2),
        points: points,
        geodesic: false,
        visible: true,
      ));
    }
    return res;
  }

  // загружает полигоны
  List<MapPolygon> _getDeliveryPolygons() {
    List<Map<String, Object>>? pols = polygonsJson['features'] as List<Map<String, Object>>?;

    var _res = <MapPolygon>[];
    for (var poly in pols!) {
      var p = MapPolygon();
      _res.add(p);

      p.id = poly['id'] as int?;
      Map<String, dynamic>? properties = poly['properties']as Map<String, dynamic>?;
      String hFill = properties!['fill'];
      p.polyColor = int.parse('FF' + hFill.substring(1), radix: 16);
      p.description = properties['description'];
      p.deliveryTime = properties['delivery_time'];
      p.freeDeliveryFrom = properties['free_delivery_from'];
      p.warehouseId = properties['warehouse_id'];
      // здесь заполняем точки
      Map<String, dynamic>? geometry = poly['geometry'] as Map<String, dynamic>?;
      List<List<double>> points = geometry!['coordinates'][0];
      for (var pt in points) {
        p.points.add(LatLng(pt[1], pt[0]));
      }
    }
    return _res;
  }
}

const polygonsJson = {
  "type": "FeatureCollection",
  "metadata": {
    "name": "Родная доставка",
    "creator": "Yandex Map Constructor",
    "description": "Зона доставки из точки на Королева 3"
  },
  "features": [
    {
      "type": "Feature",
      "id": 0,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.31991888981135, 55.171122684133536],
            [61.31900913502002, 55.17167539162143],
            [61.3181937434795, 55.172221929449286],
            [61.31748564029966, 55.1726763484206],
            [61.31693136176912, 55.173030454105486],
            [61.31683761769963, 55.173207280851855],
            [61.31676466131378, 55.173279865530965],
            [61.30568668698128, 55.18115835554863],
            [61.301970497667966, 55.179491990136796],
            [61.298511800420165, 55.177972913626085],
            [61.2923191768256, 55.182532474112215],
            [61.28844398181996, 55.1809893413724],
            [61.28428119342883, 55.17920885353837],
            [61.290439545327, 55.17435815378665],
            [61.28833669345892, 55.17341250528428],
            [61.286877571755134, 55.17285984314356],
            [61.28604072254281, 55.172368581448005],
            [61.28571885746097, 55.17150885882409],
            [61.285740315132976, 55.16706256752714],
            [61.283170991060246, 55.1670695101847],
            [61.28357309024863, 55.15884421559869],
            [61.2889804236225, 55.15309404288516],
            [61.29115324508821, 55.14873865768433],
            [61.30171041977067, 55.14839456615887],
            [61.309392266389004, 55.14630537503549],
            [61.31703119766373, 55.14603500109482],
            [61.31707411300733, 55.14706732805977],
            [61.31681662094242, 55.14805047166436],
            [61.31660204422126, 55.1492793669467],
            [61.31651621353243, 55.15038534019599],
            [61.317117028352406, 55.1512700966241],
            [61.31853323471219, 55.15215483335539],
            [61.31997089874428, 55.15327301407744],
            [61.32005672943266, 55.153604775926205],
            [61.31984215271191, 55.15419456793727],
            [61.32162313949723, 55.15521439594241],
            [61.321108155366694, 55.1569345284087],
            [61.31510000717285, 55.15890030285372],
            [61.31389837753479, 55.1559516046948],
            [61.30986433517558, 55.15688538280074],
            [61.304371171113594, 55.15963744318167],
            [61.304199509736804, 55.16725375864009],
            [61.31991888981135, 55.171122684133536]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей за 30 минут,  id: 110",
        "free_delivery_from": 300,
        "delivery_time": 30,
        "warehouse_id": 110,
        "fill": "#56db40",
        "fill-opacity": 0.6,
        "stroke": "#56db40",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 1,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.33271402632201, 55.1771988206342],
            [61.33269359289915, 55.189032462997744],
            [61.32584672713893, 55.18884900819459],
            [61.319924409634076, 55.18882445515579],
            [61.319001729732925, 55.188836731679864],
            [61.31543975616116, 55.18881217862791],
            [61.31316524291654, 55.18878762556075],
            [61.31125551009792, 55.188763072478416],
            [61.31009679580356, 55.18867713657603],
            [61.30759226574496, 55.18836810839541],
            [61.30408584041094, 55.1875377674678],
            [61.30075107645396, 55.18643731026293],
            [61.292519448265054, 55.182644855800056],
            [61.298515696657255, 55.17812248436758],
            [61.30574808777571, 55.181161826326246],
            [61.30996453569753, 55.17819981208274],
            [61.31215909912508, 55.17664024567939],
            [61.31695437239005, 55.17318626120937],
            [61.317035717178854, 55.17307380342925],
            [61.31719216382014, 55.172955204623385],
            [61.31997805381439, 55.17116129393188],
            [61.32366155865644, 55.171439147604026],
            [61.3287041116039, 55.17215149178543],
            [61.33338188412608, 55.172618193101314],
            [61.336729280976684, 55.17323226540909],
            [61.33551927096491, 55.17438821538858],
            [61.33371917496987, 55.17570377966297],
            [61.333026497551934, 55.17643136698833],
            [61.33271402632201, 55.1771988206342]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей в течение 45 минут,  id: 110",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 110,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 2,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.26830836234225, 55.1759171411097],
            [61.26788199882465, 55.167298844891356],
            [61.28560941568524, 55.167158479410034],
            [61.28550550701483, 55.17148897352764],
            [61.285984335181915, 55.172583829401034],
            [61.29024647302238, 55.174355898598776],
            [61.284077823151286, 55.179184018702855],
            [61.29870572360479, 55.18589115935312],
            [61.31780841042121, 55.1891331830151],
            [61.317726753487115, 55.19384916895308],
            [61.3177107178656, 55.195281927450544],
            [61.31771950356869, 55.19733986932825],
            [61.31804039708389, 55.19839027896081],
            [61.318157442714046, 55.19868584932553],
            [61.31908338080615, 55.200232239391056],
            [61.31929483813021, 55.200479009575616],
            [61.32027717503483, 55.20138398318881],
            [61.321431173316455, 55.202190757163216],
            [61.322746104138865, 55.20293615396688],
            [61.32422196750227, 55.20365085693134],
            [61.3231537934413, 55.204266366500526],
            [61.32235743691044, 55.20484696930878],
            [61.32196046997618, 55.20512001075369],
            [61.32125236679629, 55.205653816636485],
            [61.320715924993394, 55.205316353993716],
            [61.29380800415599, 55.19688499122466],
            [61.2699578131708, 55.186387478696844],
            [61.27654531851129, 55.17549603624621],
            [61.26830836234225, 55.1759171411097]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей в течение 45 минут,  id: 110",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 110,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 3,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.26767134216818, 55.18509062997202],
            [61.28681158569852, 55.19383137615171],
            [61.296145673070356, 55.197869637703185],
            [61.31603114427343, 55.20387174974517],
            [61.31962036636868, 55.20502457445875],
            [61.320714707646474, 55.20576085828168],
            [61.317410226140126, 55.20804938657662],
            [61.28404354599482, 55.21008011469719],
            [61.284292294243166, 55.21364497550169],
            [61.28488921843645, 55.21435992998955],
            [61.28588301987194, 55.215459640339674],
            [61.29968849309146, 55.22164958675899],
            [61.29638170746347, 55.223280378085526],
            [61.28067469147226, 55.21844733471033],
            [61.268787141118125, 55.210202813973275],
            [61.26715635803688, 55.206178079695434],
            [61.26767134216818, 55.18509062997202]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей за 60 минут,  id: 110",
        "free_delivery_from": 300,
        "delivery_time": 60,
        "warehouse_id": 110,
        "fill": "#b3b3b3",
        "fill-opacity": 0.6,
        "stroke": "#b3b3b3",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 4,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.260204072268, 55.17110388464679],
            [61.26827527617843, 55.17863813681256],
            [61.26645137404798, 55.1770294663076],
            [61.26636554335986, 55.17688210392263],
            [61.26653036925321, 55.177012265836154],
            [61.26871146971854, 55.176359729063115],
            [61.27123589293785, 55.17590367045383],
            [61.27641348540912, 55.17582662359388],
            [61.272477860720336, 55.18183690994638],
            [61.269945855410405, 55.18624471427643],
            [61.262564416201094, 55.18458724086442],
            [61.25672792938461, 55.17952844934464],
            [61.25376677063241, 55.17137408796021],
            [61.25436758545126, 55.17074770475828],
            [61.25548338440182, 55.17031782822194],
            [61.260204072268, 55.17110388464679]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей за 60 минут,  id: 110",
        "free_delivery_from": 300,
        "delivery_time": 60,
        "warehouse_id": 110,
        "fill": "#b3b3b3",
        "fill-opacity": 0.6,
        "stroke": "#b3b3b3",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 5,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.40565859816731, 55.184487754613485],
            [61.402111301177996, 55.18436371145643],
            [61.38713667938238, 55.18391809394465],
            [61.38779113838191, 55.17437690623127],
            [61.37916515419006, 55.17422339346987],
            [61.37944946834562, 55.1723689123714],
            [61.374240618438726, 55.174063739561795],
            [61.369101505966235, 55.174554980300194],
            [61.368522148819075, 55.17456726124305],
            [61.3674921805574, 55.17433392272012],
            [61.36174152442954, 55.17481287924495],
            [61.35744999000542, 55.17439532773477],
            [61.3545320418298, 55.173401684189],
            [61.35109910952334, 55.17280102523939],
            [61.34834187246415, 55.173186637268145],
            [61.34532714333958, 55.17287220834438],
            [61.342645081941015, 55.17352061485059],
            [61.340027541175175, 55.17292609843014],
            [61.3429289955226, 55.16743759697685],
            [61.35418842384333, 55.16852457957432],
            [61.38079593727116, 55.162530116552425],
            [61.380570631713745, 55.16269903030108],
            [61.38075838634467, 55.1626115023667],
            [61.37933568069645, 55.173127074826766],
            [61.37916515418996, 55.17422339345523],
            [61.38453910431441, 55.17429086799612],
            [61.42197321006784, 55.1749234068415],
            [61.41581485816936, 55.18554490148491],
            [61.40565859816731, 55.184487754613485]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей в течение 45 минут, id: 111",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 111,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 6,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.37911412629602, 55.17421522211887],
            [61.38147447022921, 55.16180942581691],
            [61.38204745360844, 55.153083203850485],
            [61.39938871664367, 55.14614275873899],
            [61.42397570825667, 55.15107708702587],
            [61.42921732318734, 55.15806579694961],
            [61.42793580579373, 55.16839435252066],
            [61.422099318977295, 55.17487916677363],
            [61.37911412629602, 55.17421522211887]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей за 30 минут, id: 111",
        "free_delivery_from": 300,
        "delivery_time": 30,
        "warehouse_id": 111,
        "fill": "#56db40",
        "fill-opacity": 0.6,
        "stroke": "#56db40",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 7,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.416091170783865, 55.18542030871021],
            [61.42205120258021, 55.175098463583204],
            [61.42825246982264, 55.168417160186436],
            [61.4294111841171, 55.15804908820125],
            [61.44093395404503, 55.15674674558265],
            [61.4429134263025, 55.16972264659655],
            [61.43229171323381, 55.18588685399056],
            [61.428482976432626, 55.18565972078531],
            [61.424309459205446, 55.18555536185287],
            [61.416091170783865, 55.18542030871021]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей в течение 45 минут, id: 111",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 111,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 8,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.38106704883242, 55.16245092023097],
            [61.361154329105815, 55.162500058945426],
            [61.361791609464944, 55.14729017085487],
            [61.37964439266814, 55.1474868004237],
            [61.393506048857105, 55.14163665467568],
            [61.39895629757533, 55.146134952514906],
            [61.381833075224236, 55.15296745781896],
            [61.38106704883242, 55.16245092023097]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей в течение 45 минут, id: 111",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 111,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 9,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.39919233196854, 55.146159531939695],
            [61.393634794889685, 55.1415751989544],
            [61.4021749483931, 55.13758037569475],
            [61.41326856487872, 55.13642487500527],
            [61.4240617739546, 55.1510996953594],
            [61.39919233196854, 55.146159531939695]
          ]
        ]
      },
      "properties": {
        "description": "Бесплатная доставка от 300 рублей в течение 45 минут, id: 111",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 111,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 10,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.371766611661485, 55.17835691149239],
            [61.37214610192389, 55.178232511278246],
            [61.37246171169133, 55.17815296697743],
            [61.37228652141971, 55.1813398337573],
            [61.37217018706133, 55.182446448993936],
            [61.37205385270289, 55.18453527380924],
            [61.37176090350641, 55.18883651443444],
            [61.3716188100637, 55.1922047422309],
            [61.37131998154711, 55.19772804895127],
            [61.37089082810485, 55.19778941775975],
            [61.3631660661421, 55.20069819008347],
            [61.3362796029767, 55.20396263394303],
            [61.33627941796139, 55.2039998356494],
            [61.32974489595219, 55.2003761434579],
            [61.331258137670375, 55.1992998329399],
            [61.33205506800337, 55.198675424706764],
            [61.33224877444352, 55.19853159462681],
            [61.33244746154564, 55.19843599168948],
            [61.332469654579086, 55.19835961118553],
            [61.33271983537889, 55.19722308435452],
            [61.33277838071646, 55.19635708819973],
            [61.33278734231349, 55.19452819103609],
            [61.33281267865935, 55.192162160332245],
            [61.332809783185574, 55.1896225864157],
            [61.3330226126907, 55.17865720138298],
            [61.33379280094884, 55.178684311071976],
            [61.334510488995804, 55.178673306581786],
            [61.336773129435336, 55.17866230209959],
            [61.343532987861934, 55.178652510059635],
            [61.353377386655495, 55.17868696834138],
            [61.356258079137454, 55.178665811831806],
            [61.35924337777105, 55.17866751323862],
            [61.36141328486413, 55.17869377399778],
            [61.36938749226538, 55.178703544667506],
            [61.370468422498234, 55.17866578385763],
            [61.371766611661485, 55.17835691149239]
          ]
        ]
      },
      "properties": {
        "description": "Доставка с кр Урала 12, 30 минут, id: 118",
        "free_delivery_from": 300,
        "delivery_time": 30,
        "warehouse_id": 118,
        "fill": "#56db40",
        "fill-opacity": 0.6,
        "stroke": "#56db40",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 11,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.42827550793445, 55.14964893114619],
            [61.41969243908682, 55.134211389875205],
            [61.418576640136564, 55.12882650545907],
            [61.41943494702135, 55.12056334672255],
            [61.419306200988615, 55.11916139047513],
            [61.425936621673415, 55.11587766792288],
            [61.427234810836616, 55.11603755581796],
            [61.429348391540394, 55.1161482470701],
            [61.43460552120957, 55.116369628650176],
            [61.43931548023969, 55.116523365125545],
            [61.442421478278966, 55.11667402629549],
            [61.443617743499615, 55.11644342223591],
            [61.46683494473247, 55.111671155334534],
            [61.47535364056378, 55.125162399961646],
            [61.47994558239728, 55.128039611938895],
            [61.46463076707267, 55.13536424127045],
            [61.457059190098896, 55.139124385151504],
            [61.45137588827153, 55.14278584722316],
            [61.44493262406733, 55.14758167175917],
            [61.44054929638658, 55.15149218561125],
            [61.42827550793445, 55.14964893114619]
          ]
        ]
      },
      "properties": {
        "description": "Доставка с Барбюса 128 30 минут,  id: 119",
        "free_delivery_from": 300,
        "delivery_time": 30,
        "warehouse_id": 119,
        "fill": "#56db40",
        "fill-opacity": 0.6,
        "stroke": "#56db40",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 12,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.371500941558914, 55.195519545735856],
            [61.37161705872887, 55.19286203745073],
            [61.37173567409044, 55.1906217362454],
            [61.37186762605288, 55.18821250401164],
            [61.37219727284199, 55.18357930795781],
            [61.37254009146819, 55.17841294023028],
            [61.37249895750187, 55.1780368711469],
            [61.37056865770004, 55.17857334410102],
            [61.332932346147494, 55.178571425378685],
            [61.33294929231128, 55.177105672603936],
            [61.33336546116348, 55.17635646227932],
            [61.33404561437619, 55.17571830409141],
            [61.33623105078479, 55.17401547660336],
            [61.35415568969272, 55.1742741853324],
            [61.36154722750033, 55.17494209262173],
            [61.37014039494662, 55.17475033627296],
            [61.3723866719726, 55.174696044568414],
            [61.37603623171801, 55.173626498635386],
            [61.37770500459665, 55.173058214358036],
            [61.37918065842613, 55.17283380473262],
            [61.37891331526722, 55.17425174304986],
            [61.387610890341136, 55.174407442404046],
            [61.387337339335595, 55.17920651094246],
            [61.38725091769009, 55.18038225589675],
            [61.38717328436931, 55.181561035704696],
            [61.38704965761348, 55.18272443247662],
            [61.38695562332179, 55.18361673389566],
            [61.386856224612025, 55.18408849625639],
            [61.3926891407673, 55.18426866101281],
            [61.39838615271495, 55.18444450661934],
            [61.40318730685152, 55.18460904519966],
            [61.40597546312254, 55.18471402306352],
            [61.41081346437394, 55.18516516372716],
            [61.4087099027573, 55.18578571217746],
            [61.40566859914151, 55.188232187694304],
            [61.40443950497694, 55.1889419950304],
            [61.40342498753368, 55.19038835903056],
            [61.40113605424806, 55.19985879890921],
            [61.40098114966147, 55.20071044334109],
            [61.398091587692875, 55.2003782936048],
            [61.39314685571228, 55.2017548537784],
            [61.39180701264771, 55.20169550475695],
            [61.3848036055864, 55.200656090437654],
            [61.37140644952694, 55.19770480950693],
            [61.371500941558914, 55.195519545735856]
          ]
        ]
      },
      "properties": {
        "description": "Доставка с кр Урала 12, 45 минут, id: 118",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 118,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 13,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.441566437747404, 55.15116990809893],
            [61.44585797217122, 55.14763075521052],
            [61.45006367590656, 55.144042125483686],
            [61.45873257544272, 55.13848648401634],
            [61.480190247561836, 55.128110596060026],
            [61.48559758093585, 55.134356123285606],
            [61.458818406131186, 55.15151397558889],
            [61.449634522464194, 55.152300404374],
            [61.444055527713175, 55.15215295016289],
            [61.441566437747404, 55.15116990809893]
          ]
        ]
      },
      "properties": {
        "description": "Доставка с Барбюса 128 45 минут,  id: 119",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 119,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 14,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.416804284121625, 55.120317392964616],
            [61.409937829043514, 55.11483223111338],
            [61.40736290838916, 55.1084360198427],
            [61.414787262942426, 55.10575422530178],
            [61.41812319432556, 55.104568436414745],
            [61.42928118382754, 55.11249051629821],
            [61.42945284520449, 55.115442440711526],
            [61.427607485402234, 55.115983603089816],
            [61.42580504094425, 55.1157130228211],
            [61.42292971288021, 55.11713969804188],
            [61.416804284121625, 55.120317392964616]
          ]
        ]
      },
      "properties": {
        "description": "Доставка с Барбюса 128 45 минут,  id: 119",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 119,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
    {
      "type": "Feature",
      "id": 15,
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [61.32181460309378, 55.20219462275914],
            [61.31975466657037, 55.20061145317447],
            [61.318681782964376, 55.19910186049492],
            [61.31799513745659, 55.19749401972997],
            [61.31799513745659, 55.18907326976749],
            [61.33267218518608, 55.188950505087845],
            [61.33220011639945, 55.19823044344243],
            [61.3294749920403, 55.20052554293037],
            [61.335107630971535, 55.203612058162015],
            [61.32975394177783, 55.20660016503897],
            [61.29990631985998, 55.221574120154564],
            [61.28595341846014, 55.2153751695732],
            [61.28445009041166, 55.21358981396597],
            [61.28418589282372, 55.21007041196662],
            [61.317474788907624, 55.20833187539436],
            [61.32452899861676, 55.20367648583176],
            [61.32181460309378, 55.20219462275914]
          ]
        ]
      },
      "properties": {
        "description":
        "Бесплатная доставка от 300 рублей, Доставка с кр Урала 12, 45 минут, id: 118",
        "free_delivery_from": 300,
        "delivery_time": 45,
        "warehouse_id": 118,
        "fill": "#ffd21e",
        "fill-opacity": 0.6,
        "stroke": "#ffd21e",
        "stroke-width": "5",
        "stroke-opacity": 0.9
      }
    },
  ]
};
